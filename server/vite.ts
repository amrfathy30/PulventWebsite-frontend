import express, { type Express } from 'express';\nimport { fileURLToPath } from 'url';\nimport path, { dirname } from 'path';\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\nexport async function setupVite(app: Express) {\n  const { createServer } = await import('vite');\n  const vite = await createServer({\n    server: { middlewareMode: true },\n    appType: 'custom',\n  });\n  app.use(vite.middlewares);\n  app.use('*', async (req, res, next) => {\n    const url = req.originalUrl;\n    try {\n      const template = await vite.transformIndexHtml(url, 'index.html');\n      res.status(200).set({ 'Content-Type': 'text/html' }).end(template);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, 'dist');\n  app.use(express.static(distPath));\n  app.get('*', (req, res) => {\n    res.sendFile(path.resolve(distPath, 'index.html'));\n  });\n}
